<html>
 <head>
  <script
			  src="https://code.jquery.com/jquery-3.5.1.min.js"
			  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
			  crossorigin="anonymous">
  </script>
			  
 </head>
<body>
 <h1>wear.</H1>
 
 <h3>Folgende Kleidungstuecke befinden sich in deinem Kleiderschrank:</h3><div id="idSend"><p>Hier muessen alle Kleidungstuecke aufgezaehlt werden</p></div>
 <form>
	<fieldset>
	  <legend>Eintraege</legend>

	</fieldset>
</form>




 <h3>Folgende Kleidungstuecke sind au√üerhalb des Kleiderschranks:</h3><div id="idReceive"><p>Hier muessen alle Kleidungsteucke aufgezaehlt werden</p></div>
 <BR/>
 <BR/>
 
 
 //Hier beginnt Emily
 <br/>   
 <label for="catname">category:</label>
 <input type="text" id="categoryTextBox" name="catname"><br><br>   

 <label for="desname">description:</label>
 <input type="text" id="descriptionTextBox" name="desname"><br><br>  

 <label for="fname">category:</label>
 <input type="text" id="categoryTextBox" name="fname"><br><br>  

 <label for="fname">number_of:</label>
 <input type="text" id="categoryTextBox" name="fname"><br><br>  
 <input id="save" type="submit" value="Aenderung speichern" />

 
















	//Beispiel

	<label id="tempLabel">Temperatur:</label>

	jQuery(document).ready(function($) {
 
        $('#myTempButton').on('click', function() {
		
			var commandClnt = JSON.stringify({ type: 'command', data: 'getTemp'} ); 
			ws.send(commandClnt);
			
			console.log('Sende: ', commandClnt);
 
        });
 
    });
	  
	
	//************** Das Nachfolgende muesste man noch besser in eigene Funktionen einpacken etc. *************
  
	var ws = new WebSocket("ws://192.168.2.112:4001");

	ws.onopen = function (event) {
		console.log('Connection is open ...');
		
		var txtMess = "Hello Server";
		
		var commandClnt = JSON.stringify({ type: 'message', data: txtMess} ); 
		ws.send(commandClnt);
		
		console.log('send: ', commandClnt);
		
		$("#idSend").html(txtMess);
	};

	ws.onerror = function (err) {
		console.log('error: ', err);
	}

	ws.onmessage = function (event) {
		console.log('receive: ', event.data);
		
		try {
			var json = JSON.parse(event.data);
			
			// handle incoming message
			if (json.type === 'message') {
				
				// messageBack = JSON.stringify({ type: 'message', data: 'Hello Client'} );
				
				$("#idReceive").html(json.data);
				
				
			} else if (json.type === 'temp') {
				
				// $("#idReceive").html("Temp:"+json.data);
				$("#tempLabel").text("Temperatur:"+json.data);
			}
			
			
		} catch (e) {
			console.log('This is not a valid JSON command: ', message);
			
			// Hier noch besseres Error-Handling	
			
			$("#idReceive").html("Error");
			
		}

	};

	ws.onclose = function() {
		console.log("Connection is closed...");
	}
	
	
 </script>
 </body>
 
</html>



